<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dis hair salon">
    <meta name="author" content="Rhulani Kobeni">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <title>Home page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
        }

        form {
            max-width: 400px;
            margin: auto;
        }

        .field {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.3rem;
        }

        input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .error {
            color: red;
            font-size: 0.9rem;
        }

        button {
            padding: 0.6rem 1rem;
            background: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:disabled {
            background: #aaa;
        }
    </style>
</head>

<body>
    <h2>Register New User</h2>
    <form id="registerForm">
        <div class="field">
            <label for="title">Title of reason for Reaching out to us:</label>
            <input type="text" id="title" name="title" required minlength="2">
            <div class="error" id="titleError"></div>
        </div>
        <div class="field">
            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" required minlength="5">
            <div class="error" id="nameError"></div>
        </div>
        <div class="field">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" required>
            <div class="error" id="emailError"></div>
        </div>
        <div class="field">
            <label for="message">Message</label>
            <textarea name="message" id="message" cols="55" rows="10" required minlength="10"></textarea>
            <div class="error" id="messageError" witdh="100%"></div>
        </div>
        <button type="submit">Submit</button><button type="reset">Clear</button>
    </form>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        (function () {
            emailjs.init("MOmkglFAuzMDMtncd"); // Replace with your EmailJS public key
        })();

        const form = document.getElementById('registerForm');
        form.addEventListener('submit', function (e) {
            e.preventDefault();

            let valid = true;

            // Validation
            const title = document.getElementById('name');
            const name = document.getElementById('name');
            const message = document.getElementById('message');
            const email = document.getElementById('email');
            const time = new Date();

            document.getElementById('titleError').textContent = title.value.length < 2 || title.value.length === "" ? "title must be at least 2 characters." : "";
            document.getElementById('nameError').textContent = name.value.length < 5 ? "Name must be at least 5 characters." : "";
            document.getElementById('emailError').textContent = email.validity.valid ? "" : "Enter a valid email.";
            document.getElementById('messageError').textContent = message.value.length < 10 ? "Message must be descriptive as much as possible." : "";

            if (title.value.length < 2 || name.value.length < 2 || !email.validity.valid || message.value.length < 10) {
                valid = false;
            }

            if (!valid) return;

            // Send email via EmailJS
            emailjs.send("service_ohvelbn", "template_zk2urfd", {
                name: name.value,
                email: email.value,
            })
                .then(function (response) {
                    alert("Form submitted successfully! Email sent.");
                    form.reset();
                }, function (error) {
                    alert("Failed to send email: " + JSON.stringify(error));
                });
        });
    </script>

    <iframe
        src="https://www.google.com/maps/embed?pb=!1m23!1m12!1m3!1d229081.44783066775!2d27.87612765756153!3d-26.216266822901417!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m8!3e6!4m0!4m5!1s0x1e950b9300000001%3A0x335d35f228da3ccd!2sBraamfontein%20Centre%2C%2023%20Jorissen%20St%2C%20Braamfontein%2C%20Johannesburg%2C%202017!3m2!1d-26.192821199999997!2d28.0339195!5e0!3m2!1sen!2sza!4v1763110857279!5m2!1sen!2sza%22 width="
        600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"></iframe>
</body>

</html>